#!/bin/bash

# .firenze

save_value_session() {

	cat <<END >$TMP_FORM_FILE
$1
$2
$3
$4
$5
$6
$7
$8
$9
${10}
${11}
${12}
${13}
${14}
${15}
${16}
${17}
END
#${18}
#${19}
#${20}
#${21}
#${22}
#${23}
#${24}
}

check_phone_number() {

# 	set -x

	# -----------------------------------------
	# $1 -> CALLER_ID
	# -----------------------------------------

	# Check for italian prefix

	CALLER_ID=`echo -n "$1" | \
					awk 'BEGIN {phoneNumber=""}
					{

					if (match($1,"^+") == 0 && match($1,"^00") == 0) {
						phoneNumber="+39"$1	
					} else {
						phoneNumber=$1
					}

					if (match(phoneNumber,"^[0-9]+$") == 0 && match(phoneNumber,"^+[0-9]+$") == 0) {
						print phoneNumber": ""Invalid phone number"; exit (1);
					}

					if (match(phoneNumber,"^+39") == 0 && match(phoneNumber,"^0039") == 0) {
						print phoneNumber": ""Not italian number"; exit (1);
					}

					if (match(phoneNumber,"^[0-9]+$")) {
						print substr(phoneNumber,5);
					}

					if (match(phoneNumber,"^+[0-9]+$")) {
						print substr(phoneNumber,4);
					}

					}' 2>/dev/null`

	EXIT_VALUE=$?

# 	set +x
}
