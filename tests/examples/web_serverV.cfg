## -------------------------------------------------------------------------------
## userver - configuration parameters
## -------------------------------------------------------------------------------

userver {

## SERVER   localhost
## SERVER   10.30.1.131
## SERVER   192.168.220.102
## PORT      444
## PORT     8080

   RUN_AS_USER  apache

   USE_TCP_OPTIMIZATION yes

#  DOCUMENT_ROOT  /usr/src/ULib-1.0.5/tests/examples
#  PLUGIN_DIR     /usr/src/ULib-1.0.5/src/ulib/plugin/.libs

#  DOCUMENT_ROOT  RA
#  DOCUMENT_ROOT  /mnt/storage/stefano/source/drupal-7.0-alpha6
#  DOCUMENT_ROOT  /mnt/storage/stefano/source/silverstripe-v2.4.1
#  DOCUMENT_ROOT  doc_parse
#  DOCUMENT_ROOT  /var/www/localhost/htdocs/ridwhan
#  DOCUMENT_ROOT  /mnt/home/stefano/sito/ridwhan

#  PREFORK_CHILD  0
#  PREFORK_CHILD  1
   PREFORK_CHILD  2

#  LOG_FILE       syslog
   LOG_FILE       web_serverV.log
   LOG_FILE_SZ    1M
   LOG_MSG_SIZE   -1

   REQ_TIMEOUT 30

#  PLUGIN                       mod_http
   PLUGIN   "         mod_ssi   mod_http"
#  PLUGIN   "         mod_fcgi  mod_http"
#  PLUGIN   "         mod_geoip mod_http"
#  PLUGIN   "         mod_proxy mod_http"
#  PLUGIN   "mod_shib mod_proxy mod_http"

   PLUGIN_DIR     ../../src/ulib/plugin/.libs
}

## -------------------------------------------------------------------------------
## mod_shib - plugin parameters
## -------------------------------------------------------------------------------

// #include "mod_shib.cfg"

## -------------------------------------------------------------------------------
## mod_proxy - plugin parameters
## -------------------------------------------------------------------------------

// #include "mod_proxy.cfg"

## ------------------------------------------------------------------------------------------------------------------------------------------------
## mod_geoip - plugin parameters
## ------------------------------------------------------------------------------------------------------------------------------------------------
## COUNTRY_FORBIDDEN_MASK  mask (DOS regexp) of GEOIP country code that give forbidden access
## ------------------------------------------------------------------------------------------------------------------------------------------

mod_geoip {

   COUNTRY_FORBIDDEN_MASK CN|JP
}

# ------------------------------------------------------------------------------------------------------------------------------------------------
# mod_fcgi - plugin parameters
# ------------------------------------------------------------------------------------------
# FCGI_URI_MASK mask (DOS regexp) of uri type that send request via FCGI (*.php)
#
# SOCKET_NAME   name file for the listening socket
#
# USE_IPV6      flag to indicate use of ipv6
# SERVER        host name or ip address for server
# PORT          port number for the server
#
# RES_TIMEOUT   timeout for response from FCGI
# FCGI_KEEP_CONN If not zero, the server FCGI does not close the connection after
#                responding to request; the plugin retains responsibility for the connection
#
# LOG_FILE      locations for file log (use server log if same value)
# ------------------------------------------------------------------------------------------

mod_fcgi {

   FCGI_URI_MASK *.php
   SOCKET_NAME   /usr/src/ULib-1.0.5/tests/examples/tmp/fcgi.socket-1

#  SERVER 127.0.0.1
#  PORT   8080

   RES_TIMEOUT    10
   FCGI_KEEP_CONN yes

   LOG_FILE    web_server.log
}

# -----------------------------------------------------------------------------------------------
# mod_scgi - plugin parameters
# -----------------------------------------------------------------------------------------------
# SCGI_URI_MASK  mask (DOS regexp) of uri type that send request via SCGI (*.py)
#
# SOCKET_NAME    name file for the listening socket
#
# USE_IPV6       flag to indicate use of ipv6
# SERVER         host name or ip address for server
# PORT           port number for the server
#
# RES_TIMEOUT    timeout for response from server SCGI
# SCGI_KEEP_CONN If not zero, the server SCGI does not close the connection after
#                responding to request; the plugin retains responsibility for the connection
#
#
# LOG_FILE       location for file log (use server log if same value)
# -----------------------------------------------------------------------------------------------

mod_scgi {

   SCGI_URI_MASK *.py
   SOCKET_NAME   /usr/src/ULib-1.0.5/tests/examples/tmp/scgi.socket-1

#  SERVER        127.0.0.1
#  PORT          8080

   RES_TIMEOUT    10
   SCGI_KEEP_CONN yes

   LOG_FILE      /var/log/userver.log
}

# -----------------------------------------------------------------------------------------------------
# mod_ssi - plugin parameters
# -----------------------------------------------------------------------------------------------------
# SSI_EXT_MASK  mask (DOS regexp) of special filename extension that recognize an SSI-enabled HTML file
# -----------------------------------------------------------------------------------------------------

mod_ssi {

   SSI_EXT_MASK *.shtml|*.shtm|*.sht 
}

## ------------------------------------------------------------------------------------------------------------------------------------------------
## mod_http - plugin parameters
## ------------------------------------------------------------------------------------------------------------------------------------------------
## ALIAS                      vector of URI redirection (request -> alias)
## REWRITE_RULE_NF            vector of URI rewrite rule applied after checks that files do not exist (regex1 -> uri1 ...)
##
## CACHE_FILE_MASK            mask (DOS regexp) of pathfile that be cached in memory
##
## VIRTUAL_HOST               flag to activate practice of maintaining more than one server on one machine, as differentiated by their apparent hostname 
## DIGEST_AUTHENTICATION      flag authentication method (yes = digest, no = basic)
##
## URI_PROTECTED_MASK         mask (DOS regexp) of URI protected from prying eyes
## URI_PROTECTED_ALLOWED_IP   list of comma separated client address for IP-based access control (IPADDR[/MASK]) for URI_PROTECTED_MASK
## ------------------------------------------------------------------------------------------------------------------------------------------------

mod_http {

   ## Allows you to tell clients about documents that used to exist in your server's namespace, but do not anymore.
   ## The client will make a request for the document at its new location
   ALIAS [
         /  /index.php
         ]

   ## vector of URI rewrite rule applied after checks that files do not exist (regex1 -> uri1 ...)
   REWRITE_RULE_NF [
#                  ^/.*\.[A-Za-z0-9]+.*?$ $0
#                  ^/(.*?)(\?|$)(.*)      /sapphire/main.php?url=$1&$3
                   ]

#  CACHE_FILE_MASK       *.css|*.js|*.gif|inp/http/data/file1
#  CACHE_FILE_MASK       *.css|*.js|*.gif|inp/http/data/file1|*.shtml

   VIRTUAL_HOST          yes
## DIGEST_AUTHENTICATION yes
}
