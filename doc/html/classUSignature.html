<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ULib C++ Library: USignature Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>USignature Class Reference</h1><!-- doxytag: class="USignature" -->
<p><code>#include &lt;<a class="el" href="signature_8h_source.html">signature.h</a>&gt;</code></p>

<p><a href="classUSignature-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#abc4277ce7801d7de169a04c89de739c2">USignature</a> (const char *alg=&quot;RSA-SHA1&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a55e25ab95c4d484ac81358f7567c67dd">~USignature</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#aecda6b75f84c4089f3da9879da9c9514">getAlgorithm</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a5d1d656c67cfabb4e2ffaf3a14edf6c0">resetEngine</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a75adc1d3bcae01102f7004b4170e4ece">initSign</a> (EVP_PKEY *privKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#ab6931e05f2b3b3f09af2553ec57e8f4b">initVerify</a> (EVP_PKEY *pubKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#aa7a3e4f5733f835cf95946401331d8b0">update</a> (const char *data, int offset=0, int len=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#ac9325010900949fe1ca73127ec24fd87">update</a> (const <a class="el" href="classUString.html">UString</a> &amp;data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a7e5274e5adbfd898863714c9896a43e5">sign</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c8dafa5bd8e90031d3004d0f149fa48"></a><!-- doxytag: member="USignature::sign" ref="a4c8dafa5bd8e90031d3004d0f149fa48" args="(const UString &amp;data)" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>sign</b> (const <a class="el" href="classUString.html">UString</a> &amp;data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a864dca35a6c37542f52f942d1ac4d27c"></a><!-- doxytag: member="USignature::sign" ref="a864dca35a6c37542f52f942d1ac4d27c" args="(const char *data, int offset=0, int len=0)" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>sign</b> (const char *data, int offset=0, int len=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a41d262f8a07baad794e69e7b6685dbf6">verify</a> (const <a class="el" href="classUString.html">UString</a> &amp;signature)</td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">U_MEMORY_TEST <br class="typebreak"/>
U_MEMORY_ALLOCATOR static <br class="typebreak"/>
U_MEMORY_DEALLOCATOR bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUSignature.html#a4831176d08341d2afd5e3a2851a00266">isSignatureAlgorithmSupported</a> (const char *alg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac84897a87528dc4ac42266aa8101579f"></a><!-- doxytag: member="USignature::getEVP_MD" ref="ac84897a87528dc4ac42266aa8101579f" args="(const char *alg)" -->
static const EVP_MD *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getEVP_MD</b> (const char *alg)</td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>State</b> { <b>UNINITIALIZED</b>, 
<b>SIGN</b>, 
<b>VERIFY</b>
 }</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49715b6b9fe2f74f2dd337d21677c73e"></a><!-- doxytag: member="USignature::context" ref="a49715b6b9fe2f74f2dd337d21677c73e" args="" -->
EVP_MD_CTX&nbsp;</td><td class="memItemRight" valign="bottom"><b>context</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd088c3afbee41036b8981173f923963"></a><!-- doxytag: member="USignature::algorithm" ref="abd088c3afbee41036b8981173f923963" args="" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>algorithm</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ee926dc57e9f072b3ce7d0c22d4c503"></a><!-- doxytag: member="USignature::publicKey" ref="a4ee926dc57e9f072b3ce7d0c22d4c503" args="" -->
EVP_PKEY *&nbsp;</td><td class="memItemRight" valign="bottom"><b>publicKey</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a74ed104a242b0622c716580928057e2c"></a><!-- doxytag: member="USignature::privateKey" ref="a74ed104a242b0622c716580928057e2c" args="" -->
EVP_PKEY *&nbsp;</td><td class="memItemRight" valign="bottom"><b>privateKey</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a529021927bf650576d6993dffb45922e"></a><!-- doxytag: member="USignature::state" ref="a529021927bf650576d6993dffb45922e" args="" -->
enum USignature::State&nbsp;</td><td class="memItemRight" valign="bottom"><b>state</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements the digital signature holding a ENV_MD_CTX object and wrapping the appropriate openssl functions.</p>
<p>A <em><a class="el" href="classUSignature.html">USignature</a></em> object is provides applications, albeit indirectly, with the functionality of a digital signature algorithm such as RSA-MD5 or DSA-SHA1. Digital signatures are used for authentication and integrity assurance of digital data.</p>
<p>A <em><a class="el" href="classUSignature.html">USignature</a></em> object is initialized by calling either the <em> intSign</em> if we are signing or the <em>initVerify</em> method if we are verifying. The data is processed through it using the <em>update</em> methods. Once all the data has been updated, one of the <em>sign</em> methods will be should be called to compute the signature, or the verify method should be called to verify a signature.</p>
<pre>
 <b>Usage:</b>
    <a class="el" href="classUSignature.html">USignature</a> sig = <a class="el" href="classUSignature.html">USignature</a>("RSA-MD5");</pre><pre>    sig-&gt;initSign(privateKey);</pre><pre>    sig-&gt;update("Date");
    sig-&gt;update("to");
    sig-&gt;update("be signed");</pre><pre>    <a class="el" href="classUString.html">UString</a> signature = sig-&gt;<a class="el" href="classUSignature.html#a7e5274e5adbfd898863714c9896a43e5">sign()</a>;
 </pre> <hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abc4277ce7801d7de169a04c89de739c2"></a><!-- doxytag: member="USignature::USignature" ref="abc4277ce7801d7de169a04c89de739c2" args="(const char *alg=&quot;RSA&#45;SHA1&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USignature::USignature </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>alg</em> = <code>&quot;RSA-SHA1&quot;</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs this object. </p>

</div>
</div>
<a class="anchor" id="a55e25ab95c4d484ac81358f7567c67dd"></a><!-- doxytag: member="USignature::~USignature" ref="a55e25ab95c4d484ac81358f7567c67dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USignature::~USignature </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes this object. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aecda6b75f84c4089f3da9879da9c9514"></a><!-- doxytag: member="USignature::getAlgorithm" ref="aecda6b75f84c4089f3da9879da9c9514" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* USignature::getAlgorithm </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a string that identifies the algorithm, independent of implementation details. The name should be a standard name such as "RSA-MD5" or "DSA-SHA1"</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>name of the algorithm </dd></dl>

</div>
</div>
<a class="anchor" id="a75adc1d3bcae01102f7004b4170e4ece"></a><!-- doxytag: member="USignature::initSign" ref="a75adc1d3bcae01102f7004b4170e4ece" args="(EVP_PKEY *privKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USignature::initSign </td>
          <td>(</td>
          <td class="paramtype">EVP_PKEY *&nbsp;</td>
          <td class="paramname"> <em>privKey</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes this object for signing. If this method is called again with a different argument, it negates the effect of this call.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>privateKey</em>&nbsp;</td><td>the private key of the identity whose signature is going to be generated </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classUSignature.html#a5d1d656c67cfabb4e2ffaf3a14edf6c0">resetEngine()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab6931e05f2b3b3f09af2553ec57e8f4b"></a><!-- doxytag: member="USignature::initVerify" ref="ab6931e05f2b3b3f09af2553ec57e8f4b" args="(EVP_PKEY *pubKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USignature::initVerify </td>
          <td>(</td>
          <td class="paramtype">EVP_PKEY *&nbsp;</td>
          <td class="paramname"> <em>pubKey</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes this object for verification. If this method is called again with a different argument, it negates the effect of this call.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>publicKey</em>&nbsp;</td><td>the public key of the identity whose signature is going to be verified </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classUSignature.html#a5d1d656c67cfabb4e2ffaf3a14edf6c0">resetEngine()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a4831176d08341d2afd5e3a2851a00266"></a><!-- doxytag: member="USignature::isSignatureAlgorithmSupported" ref="a4831176d08341d2afd5e3a2851a00266" args="(const char *alg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U_MEMORY_TEST U_MEMORY_ALLOCATOR static U_MEMORY_DEALLOCATOR bool USignature::isSignatureAlgorithmSupported </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>alg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <em>true</em> if the signature algorithm specified by <em>alg</em> is supported.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>alg</em>&nbsp;</td><td>string name of the algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5d1d656c67cfabb4e2ffaf3a14edf6c0"></a><!-- doxytag: member="USignature::resetEngine" ref="a5d1d656c67cfabb4e2ffaf3a14edf6c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USignature::resetEngine </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resets the digest engine. </p>

</div>
</div>
<a class="anchor" id="a7e5274e5adbfd898863714c9896a43e5"></a><!-- doxytag: member="USignature::sign" ref="a7e5274e5adbfd898863714c9896a43e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUString.html">UString</a> USignature::sign </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the digital signature of whatever data has been accumlated from the update calls.</p>
<p>Error if <em>initSign</em> has not been called or if the private key is uninitialized </p>

</div>
</div>
<a class="anchor" id="ac9325010900949fe1ca73127ec24fd87"></a><!-- doxytag: member="USignature::update" ref="ac9325010900949fe1ca73127ec24fd87" args="(const UString &amp;data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USignature::update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the data to be signed or verified.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>the string of bytes to use for the update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classUSignature.html#aa7a3e4f5733f835cf95946401331d8b0">update(const char*, int, int)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa7a3e4f5733f835cf95946401331d8b0"></a><!-- doxytag: member="USignature::update" ref="aa7a3e4f5733f835cf95946401331d8b0" args="(const char *data, int offset=0, int len=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USignature::update </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>offset</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the data to be signed or verified.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>the string of bytes to use for the update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>start index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>the number of bytes to use starting at <em>offset</em> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a41d262f8a07baad794e69e7b6685dbf6"></a><!-- doxytag: member="USignature::verify" ref="a41d262f8a07baad794e69e7b6685dbf6" args="(const UString &amp;signature)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USignature::verify </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>signature</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if signature verifies, false otherwise. All the data that has been accumulated by update calls is signed by the public key and the results are compared to the input signature. If they match verify is true.</p>
<p>Error if <em>initVerify</em> has not been called or if the public key is uninitialized</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signature</em>&nbsp;</td><td>digital signature to be verified </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/ulib/ssl/<a class="el" href="signature_8h_source.html">signature.h</a></li>
<li>src/ulib/ssl/signature.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Feb 2 20:00:51 2010 for ULib C++ Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
