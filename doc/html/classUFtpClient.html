<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ULib C++ Library: UFtpClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>UFtpClient Class Reference</h1><!-- doxytag: class="UFtpClient" --><!-- doxytag: inherits="UTCPSocket" -->
<p>Creates and manages a client connection with a remote FTP server.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ftp_8h_source.html">ftp.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for UFtpClient:</div>
<div class="dynsection">
<div class="center"><img src="classUFtpClient__inherit__graph.png" border="0" usemap="#UFtpClient_inherit__map" alt="Inheritance graph"/></div>
<map name="UFtpClient_inherit__map" id="UFtpClient_inherit__map">
<area shape="rect" id="node7" href="classUSSLFtpClient.html" title="Creates and manages a secure client connection with a remote FTP server." alt="" coords="5,238,109,266"/><area shape="rect" id="node2" href="classUTCPSocket.html" title="UTCPSocket" alt="" coords="12,83,103,111"/><area shape="rect" id="node4" href="classUSocket.html" title="basic IP socket functionality" alt="" coords="24,6,91,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for UFtpClient:</div>
<div class="dynsection">
<div class="center"><img src="classUFtpClient__coll__graph.png" border="0" usemap="#UFtpClient_coll__map" alt="Collaboration graph"/></div>
<map name="UFtpClient_coll__map" id="UFtpClient_coll__map">
<area shape="rect" id="node2" href="classUTCPSocket.html" title="UTCPSocket" alt="" coords="125,529,216,557"/><area shape="rect" id="node18" href="classUSSLSocket.html" title="USSLSocket" alt="" coords="176,622,267,650"/><area shape="rect" id="node4" href="classUSocket.html" title="basic IP socket functionality" alt="" coords="71,449,137,477"/><area shape="rect" id="node6" href="classUIPAddress.html" title="UIPAddress" alt="" coords="189,266,275,294"/><area shape="rect" id="node8" href="classUString.html" title="UString" alt="" coords="16,99,80,127"/><area shape="rect" id="node11" href="classUStringRep.html" title="UStringRep" alt="" coords="5,6,91,34"/><area shape="rect" id="node14" href="unionuupcAddress.html" title="uupcAddress" alt="" coords="187,99,277,127"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classUFtpClient-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7">TransferType</a> { <a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7ab85756d35fd553d017d7ada39a2dd9c4">Binary</a>, 
<a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7aa161217fa99d79655a4c775e81151215">Ascii</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a89ed1652454946fbcfa615f4a78afbaf">DataConnectionType</a> { <a class="el" href="classUFtpClient.html#a89ed1652454946fbcfa615f4a78afbafa4786f144de7834586014669da9b68722">Passive</a>, 
<a class="el" href="classUFtpClient.html#a89ed1652454946fbcfa615f4a78afbafa63fbec4d3f4333c11b7588af61eab369">Active</a>
 }</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#ab2acc6c092c3bd9c5258283bbf237616">UFtpClient</a> (bool bSocketIsIPv6=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#afae7b2ce5a74e193d9fca0f7b4cbf1b1">connectServer</a> (const <a class="el" href="classUIPAddress.html">UIPAddress</a> &amp;ip, int port=21, uint32_t timeoutMS=U_TIMEOUT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24312d3f6b91577a44f1e9139c0c15d2"></a><!-- doxytag: member="UFtpClient::connectServer" ref="a24312d3f6b91577a44f1e9139c0c15d2" args="(const UString &amp;server, int port=21, uint32_t timeoutMS=U_TIMEOUT)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>connectServer</b> (const <a class="el" href="classUString.html">UString</a> &amp;server, int port=21, uint32_t timeoutMS=U_TIMEOUT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a5a7f8a4f39f724f662291aede2643fbd">login</a> (const char *user=&quot;anonymous&quot;, const char *<a class="el" href="structpasswd.html">passwd</a>=&quot;-lara@gmx.co.uk&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a6beeaf5322a70f7a54d3403638764687">setTransferType</a> (<a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7">TransferType</a> type=Binary)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#aed443841d29f64605dd04aadb637dbc3">changeWorkingDirectory</a> (const <a class="el" href="classUString.html">UString</a> &amp;path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a33e17ac9201f6297a88eda9608fed3f1">dataTransferComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a6a762f2686e5cc6aaa7dbbcb81c113ea">retrieveFile</a> (const <a class="el" href="classUString.html">UString</a> &amp;path, off_t offset=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adea6feb72ab0909332edd530ac2f3148"></a><!-- doxytag: member="UFtpClient::download" ref="adea6feb72ab0909332edd530ac2f3148" args="(const UIPAddress &amp;ip, const UString &amp;path, off_t offset=0)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>download</b> (const <a class="el" href="classUIPAddress.html">UIPAddress</a> &amp;ip, const <a class="el" href="classUString.html">UString</a> &amp;path, off_t offset=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0aa38bbb37a617220dbb5627cab6003"></a><!-- doxytag: member="UFtpClient::download" ref="ab0aa38bbb37a617220dbb5627cab6003" args="(const UString &amp;server, const UString &amp;path, off_t offset=0)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>download</b> (const <a class="el" href="classUString.html">UString</a> &amp;server, const <a class="el" href="classUString.html">UString</a> &amp;path, off_t offset=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b1842be0a09c4428d1b376c19808035"></a><!-- doxytag: member="UFtpClient::getFileSize" ref="a1b1842be0a09c4428d1b376c19808035" args="() const " -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>getFileSize</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4819847a1029e977fa9b077314785ee4"></a><!-- doxytag: member="UFtpClient::getFileSize" ref="a4819847a1029e977fa9b077314785ee4" args="(const UIPAddress &amp;ip, const UString &amp;path)" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>getFileSize</b> (const <a class="el" href="classUIPAddress.html">UIPAddress</a> &amp;ip, const <a class="el" href="classUString.html">UString</a> &amp;path)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a343a8ce84a18a5a050c569ffbc5ffd6f"></a><!-- doxytag: member="UFtpClient::status" ref="a343a8ce84a18a5a050c569ffbc5ffd6f" args="()" -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>status</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a474f95385c8f5e07345454279b03fe5e"></a><!-- doxytag: member="UFtpClient::setConnection" ref="a474f95385c8f5e07345454279b03fe5e" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>setConnection</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90266b9a74c9e3ae663ab6e882737c3b"></a><!-- doxytag: member="UFtpClient::readCommandResponse" ref="a90266b9a74c9e3ae663ab6e882737c3b" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>readCommandResponse</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a77dfd8417a1a60348de537be25428b44"></a><!-- doxytag: member="UFtpClient::syncCommand" ref="a77dfd8417a1a60348de537be25428b44" args="(const char *format,...)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>syncCommand</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e50f90c42a4257525f8231cd9f6d82c"></a><!-- doxytag: member="UFtpClient::waitReady" ref="a2e50f90c42a4257525f8231cd9f6d82c" args="(uint32_t timeoutMS)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>waitReady</b> (uint32_t timeoutMS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa23f3e07fb3cdf76fa468a429e6bec20"></a><!-- doxytag: member="UFtpClient::download" ref="aa23f3e07fb3cdf76fa468a429e6bec20" args="(const UString &amp;path, off_t offset)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>download</b> (const <a class="el" href="classUString.html">UString</a> &amp;path, off_t offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a7c0d09b3874872a6e438e146f9740c6b">createPassiveDataConnection</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a43f9957db9398830ed33dad344c5456d">restart</a> (off_t offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUFtpClient.html#a29c5e05e27a7d046a5e7bddf9a737051">getFileSize</a> (const <a class="el" href="classUString.html">UString</a> &amp;path)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb1853c16e27ba613303e9e8f4ea0b49"></a><!-- doxytag: member="UFtpClient::tlsctrl" ref="acb1853c16e27ba613303e9e8f4ea0b49" args="" -->
<a class="el" href="classUSSLSocket.html">USSLSocket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>tlsctrl</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53b27c0ce9cf69733052c4dbc39d20c0"></a><!-- doxytag: member="UFtpClient::tlsdata" ref="a53b27c0ce9cf69733052c4dbc39d20c0" args="" -->
<a class="el" href="classUSSLSocket.html">USSLSocket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>tlsdata</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf28525b8155e4b43f05a9e3927bcaba"></a><!-- doxytag: member="UFtpClient::bytes_to_read" ref="adf28525b8155e4b43f05a9e3927bcaba" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>bytes_to_read</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfae6b08b0e0c9620699a6708dda80cf"></a><!-- doxytag: member="UFtpClient::port" ref="acfae6b08b0e0c9620699a6708dda80cf" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>port</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac94a5109f70f2fdb4495698b49d14990"></a><!-- doxytag: member="UFtpClient::response" ref="ac94a5109f70f2fdb4495698b49d14990" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>response</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14cba684b5257a126c2df507a3f0ca29"></a><!-- doxytag: member="UFtpClient::pasv" ref="a14cba684b5257a126c2df507a3f0ca29" args="" -->
<a class="el" href="classUSocket.html">USocket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>pasv</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Creates and manages a client connection with a remote FTP server. </p>
<p>The FTP protocol, described in <a href="http://www.ietf.org/rfc/rfc959.txt">RFC 959</a>, facilitates the transfer of files from one host to another. This class manages the socket connections with the remote server as well as providing a high-level interface to the commands that are defined by the protocol.</p>
<h4>FTP Restart</h4>
<p><a class="el" href="classUFtpClient.html" title="Creates and manages a client connection with a remote FTP server.">UFtpClient</a> allows applications to restart failed transfers when the remote FTP server supports stream-mode restart. Stream-mode restart is not specified in RFC 959, but is specified in <a href="http://www.ietf.org/internet-drafts/draft-ietf-ftpext-mlst-16.txt">Extensions to FTP</a> and is widely supported.</p>
<p>Where stream-mode restart is supported, restarting binary transfers is considerably easier than restarting ASCII transfers. This is due to the fact that the FTP <em>SIZE</em> command, which reports the size of the remote file, reports the <em>transfer size</em> of the file, which is not necessarily the same as the physical size of the file. The is described in more detail in the documentation for the getFileSize() method. </p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a89ed1652454946fbcfa615f4a78afbaf"></a><!-- doxytag: member="UFtpClient::DataConnectionType" ref="a89ed1652454946fbcfa615f4a78afbaf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classUFtpClient.html#a89ed1652454946fbcfa615f4a78afbaf">UFtpClient::DataConnectionType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a89ed1652454946fbcfa615f4a78afbafa4786f144de7834586014669da9b68722"></a><!-- doxytag: member="Passive" ref="a89ed1652454946fbcfa615f4a78afbafa4786f144de7834586014669da9b68722" args="" -->Passive</em>&nbsp;</td><td>
<p>Client connects to the (passive) server for data transfers </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a89ed1652454946fbcfa615f4a78afbafa63fbec4d3f4333c11b7588af61eab369"></a><!-- doxytag: member="Active" ref="a89ed1652454946fbcfa615f4a78afbafa63fbec4d3f4333c11b7588af61eab369" args="" -->Active</em>&nbsp;</td><td>
<p>(Active) server connects to the client for data transfers </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="ad2e01cc9345b5f6d5a7674839f540cb7"></a><!-- doxytag: member="UFtpClient::TransferType" ref="ad2e01cc9345b5f6d5a7674839f540cb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7">UFtpClient::TransferType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad2e01cc9345b5f6d5a7674839f540cb7ab85756d35fd553d017d7ada39a2dd9c4"></a><!-- doxytag: member="Binary" ref="ad2e01cc9345b5f6d5a7674839f540cb7ab85756d35fd553d017d7ada39a2dd9c4" args="" -->Binary</em>&nbsp;</td><td>
<p>Treats files an an opaque stream of bytes </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad2e01cc9345b5f6d5a7674839f540cb7aa161217fa99d79655a4c775e81151215"></a><!-- doxytag: member="Ascii" ref="ad2e01cc9345b5f6d5a7674839f540cb7aa161217fa99d79655a4c775e81151215" args="" -->Ascii</em>&nbsp;</td><td>
<p>Translates line-feeds into the appropriate local format </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab2acc6c092c3bd9c5258283bbf237616"></a><!-- doxytag: member="UFtpClient::UFtpClient" ref="ab2acc6c092c3bd9c5258283bbf237616" args="(bool bSocketIsIPv6=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UFtpClient::UFtpClient </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>bSocketIsIPv6</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs a new <a class="el" href="classUFtpClient.html" title="Creates and manages a client connection with a remote FTP server.">UFtpClient</a> with default values for all properties </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aed443841d29f64605dd04aadb637dbc3"></a><!-- doxytag: member="UFtpClient::changeWorkingDirectory" ref="aed443841d29f64605dd04aadb637dbc3" args="(const UString &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::changeWorkingDirectory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Changes the current working directory on the remote FTP server.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>@path</em>&nbsp;</td><td>the name of the directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the current working directory was changed; <code>false</code> otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="afae7b2ce5a74e193d9fca0f7b4cbf1b1"></a><!-- doxytag: member="UFtpClient::connectServer" ref="afae7b2ce5a74e193d9fca0f7b4cbf1b1" args="(const UIPAddress &amp;ip, int port=21, uint32_t timeoutMS=U_TIMEOUT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::connectServer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUIPAddress.html">UIPAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em> = <code>21</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>timeoutMS</em> = <code>U_TIMEOUT</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>function called to established a socket connection with the FTP network server </p>

</div>
</div>
<a class="anchor" id="a7c0d09b3874872a6e438e146f9740c6b"></a><!-- doxytag: member="UFtpClient::createPassiveDataConnection" ref="a7c0d09b3874872a6e438e146f9740c6b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::createPassiveDataConnection </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Passive Mode FTP</p>
<p>As you know by now, the FTP protocol utilises two Tcp connections: the command connection and a data connection.</p>
<p>In standard (AKA active) FTP, the data channel is created by the client listening on a socket (default port 20) and the server connecting to that port. However, this regime causes difficulties for clients sitting behind firewalls because the firewall will normally prevent the (unknown) server connecting to the arbitrary FTP data port.</p>
<p>In passive FTP it is the server which manages the data connection by listening for a connection on a server port.</p>
<p>To enter passive mode, the client sends the PASV command. The server should respond with a "227 entering passive mode (x,x,x,x,p,p)" message. The message tokens describe an IPv4 intenet address followed by two digits desribing the upper and lower 8-bits of the port number.</p>
<p>In stream mode operations (the default), the data connection is closed to mark the end of each data transfer. Additionally, the server only listens for a single connection on the passive port, so there is no point in remembering the host/port assignement - it changes each time </p>

</div>
</div>
<a class="anchor" id="a33e17ac9201f6297a88eda9608fed3f1"></a><!-- doxytag: member="UFtpClient::dataTransferComplete" ref="a33e17ac9201f6297a88eda9608fed3f1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::dataTransferComplete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tests whether the preceding data transfer request completed successfully.</p>
<p>Asynchronous data transfer requests signal their completion by returning EndOfFile (for read) or by the application closing the stream (for write). In both cases, the remote FTP server sends a response message on the control connection to indicate if the remote operation completed successfully. This method interrogates the response and indicates the success of the operation </p>

</div>
</div>
<a class="anchor" id="a29c5e05e27a7d046a5e7bddf9a737051"></a><!-- doxytag: member="UFtpClient::getFileSize" ref="a29c5e05e27a7d046a5e7bddf9a737051" args="(const UString &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t UFtpClient::getFileSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the transfer size of the remote file.</p>
<p>This uses the <em>SIZE</em> FTP command which is not defined in RFC 959, but is usually implemented by FTP servers nonetheless.</p>
<p>The <em>SIZE</em> command is supposed to return the <em>transfer size</em> of the file, which is determined for the transfer mode in operation. For IMAGE mode, this will equate to the size (in bytes) of the remote file. For ASCII mode, this will equate to the number of bytes that will be used to transfer the file over the network, with line-feeds translated into &lt;CRLF&gt; pairs.</p>
<h4>Using getFileSize() to control restart operations</h4>
<p>getFileSize() can be used to restart remote store operations if the transfer mode is IMAGE (binary), but care must be taken when using it for ASCII mode transfers from UNIX-based hosts.</p>
<p>Line feeds in text files on UNIX hosts are represented by a single &lt;LF&gt; character, and therefore, if a local file is fully transfered to a remote host, the getFileSize() command is likely to report a size larger than the actual size of the local file</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>the path name of the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5a7f8a4f39f724f662291aede2643fbd"></a><!-- doxytag: member="UFtpClient::login" ref="a5a7f8a4f39f724f662291aede2643fbd" args="(const char *user=&quot;anonymous&quot;, const char *passwd=&quot;&#45;lara@gmx.co.uk&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::login </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>user</em> = <code>&quot;anonymous&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>passwd</em> = <code>&quot;-lara@gmx.co.uk&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a login request to the remote FTP server.</p>
<p>Note that the user name and password are sent over the network in plain text, so it is not a good idea to use FTP authentication with sensitive data or passwords.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>the userid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>password</em>&nbsp;</td><td>the password </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a43f9957db9398830ed33dad344c5456d"></a><!-- doxytag: member="UFtpClient::restart" ref="a43f9957db9398830ed33dad344c5456d" args="(off_t offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::restart </td>
          <td>(</td>
          <td class="paramtype">off_t&nbsp;</td>
          <td class="paramname"> <em>offset</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>helper function to issue the REST command.</p>
<p>The offset value gives the number of octets of the immediately following transfer to not actually send, effectively causing the transmission to be restarted at a later point. A value of zero effectively disables restart, causing the entire file to be transmitted. The server will respond to the REST command with a 350 reply, indicating that the REST parameter has been saved, and that another command, which should be either RETR or STOR, should then follow to complete the restart </p>

</div>
</div>
<a class="anchor" id="a6a762f2686e5cc6aaa7dbbcb81c113ea"></a><!-- doxytag: member="UFtpClient::retrieveFile" ref="a6a762f2686e5cc6aaa7dbbcb81c113ea" args="(const UString &amp;path, off_t offset=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UFtpClient::retrieveFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&nbsp;</td>
          <td class="paramname"> <em>offset</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the specified file from the remote server and makes it available as an stream.</p>
<p>The application should read from the stream until it receives an EOF marker. At this point the application should check the success of the remote operation by calling <a class="el" href="classUFtpClient.html#a33e17ac9201f6297a88eda9608fed3f1">dataTransferComplete()</a>.</p>
<p>If this <a class="el" href="classUFtpClient.html" title="Creates and manages a client connection with a remote FTP server.">UFtpClient</a> is going to be used for further operations it is essential that <a class="el" href="classUFtpClient.html#a33e17ac9201f6297a88eda9608fed3f1">dataTransferComplete()</a> is called. However, if the application is not interested in testing the success of the transfer, and no other FTP operations are required, the <a class="el" href="classUFtpClient.html" title="Creates and manages a client connection with a remote FTP server.">UFtpClient</a> may be deleted before the stream is fully processed.</p>
<p>This method can be used to restart a failed retrieve operation by specifying a value for the <code>offset</code> parameter. Note that this value refers to the number of bytes to skip from the network transfer, not a number of bytes from the remote file. However, for binary transfers, these two values are the same</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>the file name to retrieve. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>the number of bytes of the transfer to skip. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A stream attached to the remote file.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classUFtpClient.html#a33e17ac9201f6297a88eda9608fed3f1">dataTransferComplete()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6beeaf5322a70f7a54d3403638764687"></a><!-- doxytag: member="UFtpClient::setTransferType" ref="a6beeaf5322a70f7a54d3403638764687" args="(TransferType type=Binary)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UFtpClient::setTransferType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classUFtpClient.html#ad2e01cc9345b5f6d5a7674839f540cb7">TransferType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>Binary</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the transfer type that will be used for subsequent data operations: TransferType::Ascii or TransferType::Binary. Binary transfers treat files as an opaque stream of bytes whereas Ascii transfers translate line-feeds into &lt;CRLF&gt; pairs for transmission over the network, and then translate these back into the format appropriate for the target platform </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/ulib/net/client/<a class="el" href="ftp_8h_source.html">ftp.h</a></li>
<li>src/ulib/net/client/ftp.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat Jan 23 17:17:36 2010 for ULib C++ Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
