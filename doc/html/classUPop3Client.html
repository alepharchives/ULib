<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ULib C++ Library: UPop3Client Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>UPop3Client Class Reference</h1><!-- doxytag: class="UPop3Client" --><!-- doxytag: inherits="UTCPSocket" -->
<p>Creates and manages a client connection with a remote POP3 server.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="pop3_8h_source.html">pop3.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for UPop3Client:</div>
<div class="dynsection">
<div class="center"><img src="classUPop3Client__inherit__graph.png" border="0" usemap="#UPop3Client_inherit__map" alt="Inheritance graph"/></div>
<map name="UPop3Client_inherit__map" id="UPop3Client_inherit__map">
<area shape="rect" id="node2" href="classUTCPSocket.html" title="UTCPSocket" alt="" coords="5,83,96,111"/><area shape="rect" id="node4" href="classUSocket.html" title="basic IP socket functionality" alt="" coords="17,6,84,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for UPop3Client:</div>
<div class="dynsection">
<div class="center"><img src="classUPop3Client__coll__graph.png" border="0" usemap="#UPop3Client_coll__map" alt="Collaboration graph"/></div>
<map name="UPop3Client_coll__map" id="UPop3Client_coll__map">
<area shape="rect" id="node2" href="classUTCPSocket.html" title="UTCPSocket" alt="" coords="60,531,151,559"/><area shape="rect" id="node4" href="classUSocket.html" title="basic IP socket functionality" alt="" coords="77,450,144,478"/><area shape="rect" id="node6" href="classUIPAddress.html" title="UIPAddress" alt="" coords="225,266,311,294"/><area shape="rect" id="node8" href="classUString.html" title="UString" alt="" coords="51,99,115,127"/><area shape="rect" id="node11" href="classUStringRep.html" title="UStringRep" alt="" coords="40,6,125,34"/><area shape="rect" id="node14" href="unionuupcAddress.html" title="uupcAddress" alt="" coords="223,99,313,127"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classUPop3Client-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>POP3ClientStatus</b> { <b>INIT</b>, 
<b>AUTHORIZATION</b>, 
<b>TRANSACTION</b>, 
<b>UPDATE</b>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>POP3ServerStatus</b> { <br/>
&nbsp;&nbsp;<b>OK</b>, 
<b>BAD_STATE</b>, 
<b>UNAUTHORIZED</b>, 
<b>CANT_LIST</b>, 
<br/>
&nbsp;&nbsp;<b>NO_SUCH_MESSAGE</b>, 
<b>CAPA_NOT_SUPPORTED</b>, 
<b>STLS_NOT_SUPPORTED</b>, 
<b>UIDL_NOT_SUPPORTED</b>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUPop3Client.html#a5054fac3d9b5fa0a7043650023017950">UPop3Client</a> (bool bSocketIsIPv6=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUPop3Client.html#a19290adf908a84d131ec887882a4bb08">connectServer</a> (const <a class="el" href="classUString.html">UString</a> &amp;server, int port=110, uint32_t timeout=U_TIMEOUT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a03597084ead8107689eff2edde644ccc"></a><!-- doxytag: member="UPop3Client::startTLS" ref="a03597084ead8107689eff2edde644ccc" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>startTLS</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93bab5aca1d1452053196267e0f14501"></a><!-- doxytag: member="UPop3Client::getCapabilities" ref="a93bab5aca1d1452053196267e0f14501" args="(UVector&lt; UString &gt; &amp;vec)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getCapabilities</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;vec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55464eb6c704fcad80775d9ed7013a88"></a><!-- doxytag: member="UPop3Client::isSTLS" ref="a55464eb6c704fcad80775d9ed7013a88" args="(UVector&lt; UString &gt; &amp;v) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>isSTLS</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;v) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e2eb2717a4e6732c3cf71e85dc9d21d"></a><!-- doxytag: member="UPop3Client::isUIDL" ref="a9e2eb2717a4e6732c3cf71e85dc9d21d" args="(UVector&lt; UString &gt; &amp;v) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>isUIDL</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;v) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98455a06e563918e5d0225ecd51321e2"></a><!-- doxytag: member="UPop3Client::isPIPELINING" ref="a98455a06e563918e5d0225ecd51321e2" args="(UVector&lt; UString &gt; &amp;v) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>isPIPELINING</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;v) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUPop3Client.html#a7464a73b7ad76342c427a3937150c115">login</a> (const char *user, const char *<a class="el" href="structpasswd.html">passwd</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96a041e170b7dbd0881e0f7462c29f3e"></a><!-- doxytag: member="UPop3Client::getSizeMessage" ref="a96a041e170b7dbd0881e0f7462c29f3e" args="(uint32_t n)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getSizeMessage</b> (uint32_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04dc882e29e22d36de1b61794975519e"></a><!-- doxytag: member="UPop3Client::getUIDL" ref="a04dc882e29e22d36de1b61794975519e" args="(UVector&lt; UString &gt; &amp;vec)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getUIDL</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;vec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c14cad94448651e3a9a15188c00271f"></a><!-- doxytag: member="UPop3Client::getNumMessage" ref="a0c14cad94448651e3a9a15188c00271f" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getNumMessage</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a673f3a069158224540e8762d860f8073"></a><!-- doxytag: member="UPop3Client::getHeader" ref="a673f3a069158224540e8762d860f8073" args="(uint32_t n)" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getHeader</b> (uint32_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f6db18d0b67921eafb3aab0a3df4c3e"></a><!-- doxytag: member="UPop3Client::getMessage" ref="a8f6db18d0b67921eafb3aab0a3df4c3e" args="(uint32_t n)" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getMessage</b> (uint32_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace73ec2fb8d29498fe74e459b3667bd8"></a><!-- doxytag: member="UPop3Client::reset" ref="ace73ec2fb8d29498fe74e459b3667bd8" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>reset</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf2666631be539c8dafd61df5ec49846"></a><!-- doxytag: member="UPop3Client::deleteMessage" ref="adf2666631be539c8dafd61df5ec49846" args="(uint32_t n)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>deleteMessage</b> (uint32_t n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a841a79d967e1434243c6168f484fef30"></a><!-- doxytag: member="UPop3Client::deleteAllMessage" ref="a841a79d967e1434243c6168f484fef30" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>deleteAllMessage</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a578b366cceb61484cbadd376fda262c2"></a><!-- doxytag: member="UPop3Client::getAllHeader" ref="a578b366cceb61484cbadd376fda262c2" args="(UVector&lt; UString &gt; &amp;vec)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getAllHeader</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;vec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad5d526629b29646655166c108110aae3"></a><!-- doxytag: member="UPop3Client::getAllMessage" ref="ad5d526629b29646655166c108110aae3" args="(UVector&lt; UString &gt; &amp;vec)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getAllMessage</b> (UVector&lt; <a class="el" href="classUString.html">UString</a> &gt; &amp;vec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec1cfd43c6d9e906321debacbb458d7f"></a><!-- doxytag: member="UPop3Client::quit" ref="aec1cfd43c6d9e906321debacbb458d7f" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>quit</b> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f5bdf12cb7f6228b2a56fe1e563d4b7"></a><!-- doxytag: member="UPop3Client::buffer" ref="a9f5bdf12cb7f6228b2a56fe1e563d4b7" args="" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>buffer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a163c01fa7f52a46352d12290ce5590b0"></a><!-- doxytag: member="UPop3Client::capa" ref="a163c01fa7f52a46352d12290ce5590b0" args="" -->
<a class="el" href="classUString.html">UString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>capa</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e087c88557f29de71e309907243eebe"></a><!-- doxytag: member="UPop3Client::state" ref="a8e087c88557f29de71e309907243eebe" args="" -->
POP3ClientStatus&nbsp;</td><td class="memItemRight" valign="bottom"><b>state</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a56320507258b915eade06f13930fce"></a><!-- doxytag: member="UPop3Client::pos" ref="a0a56320507258b915eade06f13930fce" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>pos</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3383e92f80c61b5b0d8fea681b1748cd"></a><!-- doxytag: member="UPop3Client::end" ref="a3383e92f80c61b5b0d8fea681b1748cd" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>end</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05aca939763f3abd2cb4c575c83d7746"></a><!-- doxytag: member="UPop3Client::response" ref="a05aca939763f3abd2cb4c575c83d7746" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>response</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13ba3af02ec9d26ed6b4d58be68128df"></a><!-- doxytag: member="UPop3Client::num_msg" ref="a13ba3af02ec9d26ed6b4d58be68128df" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>num_msg</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Creates and manages a client connection with a remote POP3 server. </p>
<p>A POP3 session progresses through a number of states during its lifetime. Once the TCP connection has been opened and the POP3 server has sent the greeting, the session enters the AUTHORIZATION state. In this state, the client must identify itself to the POP3 server. Once the client has successfully done this, the server acquires resources associated with the client's maildrop, and the session enters the TRANSACTION state. In this state, the client requests actions on the part of the POP3 server. When the client has issued the QUIT command, the session enters the UPDATE state. In this state, the POP3 server releases any resources acquired during the TRANSACTION state and says goodbye. The TCP connection is then closed.</p>
<p>Example of pop3 session:</p>
<p>1. Establish the connection 2. Read greeting from remote pop3 (expect +OK POP3 server ready &lt;<a href="mailto:1896.697170952@dbc.mtview.ca.us">1896.697170952@dbc.mtview.ca.us</a>&gt;) 3. Identify with the POP3 server send "APOP mrose c4c9334bac560ecc979e58001b3e22fb" (expect +OK mrose's maildrop has 2 messages (320 octets)) 3. Query the POP3 server send "STAT" (expect +OK 2 320) send "LIST" (expect +OK 2 messages (320 octets) 1 120 2 200 .) 4. Request actions send "RETR 1" (expect +OK 120 octets &lt;the POP3 server sends message 1&gt; .) send "DELE 1" (expect +OK message 1 deleted) send "RETR 2" (expect +OK 200 octets &lt;the POP3 server sends message 2&gt; .) send "DELE 2" (expect +OK message 2 deleted) 5. Quit send "QUIT" (expect +OK dewey POP3 server signing off (maildrop empty))</p>
<p>Here is a summary of current POP3 commands and responses:</p>
<p>Minimal POP3 Commands: USER name valid in the AUTHORIZATION state PASS string QUIT STAT valid in the TRANSACTION state LIST [msg] RETR msg DELE msg NOOP RSET QUIT</p>
<p>Optional POP3 Commands: APOP name digest valid in the AUTHORIZATION state AUTH [auth type] TOP msg n valid in the TRANSACTION state UIDL [msg]</p>
<p>POP3 Replies: +OK -ERR</p>
<p>Extended Commands: CAPA valid in AUTHORIZATION or TRANSACTION state STLS valid in AUTHORIZATION state</p>
<p>Extended Response Codes: (These will be enclosed in square brackets following an -ERR reply) LOGIN-DELAY IN-USE SYS/TEMP SYS/PERM AUTH </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5054fac3d9b5fa0a7043650023017950"></a><!-- doxytag: member="UPop3Client::UPop3Client" ref="a5054fac3d9b5fa0a7043650023017950" args="(bool bSocketIsIPv6=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UPop3Client::UPop3Client </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>bSocketIsIPv6</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs a new <a class="el" href="classUPop3Client.html" title="Creates and manages a client connection with a remote POP3 server.">UPop3Client</a> with default values for all properties </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a19290adf908a84d131ec887882a4bb08"></a><!-- doxytag: member="UPop3Client::connectServer" ref="a19290adf908a84d131ec887882a4bb08" args="(const UString &amp;server, int port=110, uint32_t timeout=U_TIMEOUT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UPop3Client::connectServer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classUString.html">UString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em> = <code>110</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>timeout</em> = <code>U_TIMEOUT</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>function called to established a socket connection with the POP3 network server </p>

</div>
</div>
<a class="anchor" id="a7464a73b7ad76342c427a3937150c115"></a><!-- doxytag: member="UPop3Client::login" ref="a7464a73b7ad76342c427a3937150c115" args="(const char *user, const char *passwd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool UPop3Client::login </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>passwd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a login request to the remote POP3 server</p>
<p>Note that the user name and password are sent over the network in plain text, so it is not a good idea to use POP3 authentication with sensitive data or passwords</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>the userid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>password</em>&nbsp;</td><td>the password </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/ulib/net/client/<a class="el" href="pop3_8h_source.html">pop3.h</a></li>
<li>src/ulib/net/client/pop3.cpp</li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Mar 24 16:51:42 2010 for ULib C++ Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
